## Getting Started

### Prerequisites
- Java 17+
- Docker 20.10+
- Maven 3.8+

### Local Development
1. **Database Setup**
```bash
docker run -d --name xpressbees-db \
  -e MYSQL_ROOT_PASSWORD=secret \
  -e MYSQL_DATABASE=xpressbees \
  -p 3306:3306 mysql:8.0
```

2. **Run Application**
```bash
mvn spring-boot:run -Dspring.profiles.active=dev
```

### Docker Deployment
```bash
# Build and start containers
docker compose up --build -d

# Verify services
docker compose ps
```

## API Documentation

### Order Management
**Create Order**
```bash
curl -X POST http://localhost:8080/api/v1/orders \
  -H "Content-Type: application/json" \
  -d '{"customerName":"John Doe","address":"123 Main St"}'
```

**Get Orders by Status**
```bash
curl "http://localhost:8080/api/v1/orders?status=PENDING&page=0&size=5"
```

### Analytics
**Top Customers**
```bash
curl http://localhost:8080/api/v1/customers/top
```

**Order Status Counts**
```bash
curl http://localhost:8080/api/v1/orders/status-count
```

### Monitoring
```bash
# Application Health
curl http://localhost:8080/actuator/health

# Metrics
curl http://localhost:8080/actuator/metrics

# Prometheus
curl http://localhost:8080/actuator/prometheus
```

## Key Optimizations

⚡ **Database-Level Locking**
```sql
SELECT ... FOR UPDATE SKIP LOCKED
```

⚡ **Batch Processing**
```java
@Scheduled(fixedRateString = "${processing.interval:5000}")
public void processOrderBatch() {
  // Processes 5 orders per batch
}
```

⚡ **Connection Pooling**
```properties
spring.datasource.hikari.maximum-pool-size=20
```

## Assumptions

1. **Order ID Generation**  
   Auto-generated by database to ensure uniqueness

2. **Status Transitions**  
   Strictly enforced: PENDING → IN_PROGRESS → DELIVERED

3. **Concurrency Handling**  
   Database-level locking prevents duplicate processing

5. **Time Zones**  
   All timestamps stored in UTC
